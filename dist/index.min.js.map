{"version":3,"sources":["../src/index.js"],"names":[],"mappings":"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","file":"index.min.js","sourcesContent":["import jQuery from 'jquery';\r\n\r\n/**\r\n * Simple client-side API for fast RESTful implementation for lavarel 5.4 backend.\r\n * Call:\r\n *   - $.rest('<index|create|show|edit|store|update|destroy>, [Object], <URL>)\r\n *   - $.rest('default', [Object])\r\n * \r\n * @copyright 2017 Ludwig Meysel\r\n * @license MIT\r\n */\r\njQuery.rest = (function ($) {\r\n\tvar fixed = {\r\n\t};\r\n\tvar defaults = {\r\n\t\turl: '/',\r\n\t\tidField: 'id',\r\n\t\tcsrf_token: false,\r\n\t\tbeforeRequest: false,\r\n\t\tafterRequest: false,\r\n\t};\r\n\r\n\tfunction r_bfr() {\r\n\t\tif (typeof (defaults.beforeRequest) == 'function')\r\n\t\t\tdefaults.beforeRequest();\r\n\t}\r\n\r\n\tfunction r_aftr(obj, def, message) {\r\n\t\tif (typeof (defaults.afterRequest) == 'function')\r\n\t\t\tdefaults.afterRequest();\r\n\t}\r\n\r\n\tfunction p(args) {\r\n\t\tif (!args)\r\n\t\t\treturn defaults;\r\n\t\treturn $.extend({}, defaults, args, fixed);\r\n\t}\r\n\r\n\tfunction e(sender) {\r\n\t\tvar cont = $('<div>').appendTo($('body'))\r\n\t\t\t.css({ 'width': '100%', 'height': '100%', 'position': 'fixed', 'top': 0, 'left': 0, 'z-index': 99999, 'background-color': '#ffe6e6' });\r\n\t\tvar text = $('<a>').appendTo(cont)\r\n\t\t\t.css({ 'color': 'red', 'font-size': '2em', 'cursor': 'pointer', position: 'absolute', 'right': '10px', 'top': '10px' })\r\n\t\t\t.html('<i class=\"fa fa-times\"></i>&nbsp;<strong>Close</strong>')\r\n\t\t\t.click(function () { cont.remove(); });\r\n\t\tvar iframe = $('<iframe>').appendTo(cont)\r\n\t\t\t.css({\r\n\t\t\t\t'position': 'absolute',\r\n\t\t\t\t'top': text.outerHeight() + 20 + 'px',\r\n\t\t\t\twidth: '100%',\r\n\t\t\t\t'border': '1px solid #red',\r\n\t\t\t\theight: document.documentElement.clientHeight - text.outerHeight() - 20 + 'px'\r\n\t\t\t});\r\n\t\tvar doc = iframe[0].contentDocument;\r\n\t\tdoc.open();\r\n\t\tdoc.writeln(sender.responseText);\r\n\t\tdoc.close();\r\n\t}\r\n\tvar rest = {\r\n\t\t/**\r\n\t\t * Create: (GET ~/create, where ~ is replaced with url-parameter.)\r\n\t\t * @param [d] The data\r\n\t\t * @param [a] additional arguments\r\n\t\t * @param [c] success-callback\r\n\t\t */\r\n\t\tcreate: function (d, a, c) {\r\n\t\t\tr_bfr();\r\n\t\t\t$.ajax({\r\n\t\t\t\tmethod: 'GET',\r\n\t\t\t\turl: a.url + '/create',\r\n\t\t\t\tdata: d,\r\n\t\t\t\tsuccess: c,\r\n\t\t\t\terror: e\r\n\t\t\t})\r\n\t\t\t\t.always(r_aftr);\r\n\t\t},\r\n\t\t/**\r\n\t\t * Index: (GET ~/)\r\n\t\t */\r\n\t\tindex: function (d, a, c) {\r\n\t\t\t$.ajax({\r\n\t\t\t\tmethod: 'GET',\r\n\t\t\t\turl: a.url,\r\n\t\t\t\tdata: d,\r\n\t\t\t\tsuccess: c,\r\n\t\t\t\terror: e\r\n\t\t\t})\r\n\t\t\t\t.always(r_aftr);\r\n\t\t},\r\n\t\t/**\r\n\t\t * Store (POST ~/)\r\n\t\t */\r\n\t\tstore: function (d, a, c) {\r\n\t\t\td['_method'] = 'POST';\r\n\t\t\t$.ajax({\r\n\t\t\t\tmethod: 'POST',\r\n\t\t\t\turl: a.url,\r\n\t\t\t\tdata: d,\r\n\t\t\t\tsuccess: c,\r\n\t\t\t\terror: e\r\n\t\t\t})\r\n\t\t\t\t.always(r_aftr);\r\n\t\t},\r\n\t\t/**\r\n\t\t * Show (GET ~/{id}, where {id} will be replaced with the value specified in <i>d</i>'s <i>idField</i>)\r\n\t\t */\r\n\t\tshow: function (d, a, c) {\r\n\t\t\t$.ajax({\r\n\t\t\t\tmethod: 'GET',\r\n\t\t\t\turl: a.url + '/' + d[defaults['idField']],\r\n\t\t\t\tdata: d,\r\n\t\t\t\tsuccess: c,\r\n\t\t\t\terror: e\r\n\t\t\t})\r\n\t\t\t\t.always(r_aftr);\r\n\t\t},\r\n\t\t/**\r\n\t\t * Edit (GET ~/{id}/edit)\r\n\t\t */\r\n\t\tedit: function (d, a, c) {\r\n\t\t\t$.ajax({\r\n\t\t\t\tmethod: 'GET',\r\n\t\t\t\turl: a.url + '/' + d[defaults['idField']] + '/edit',\r\n\t\t\t\tdata: d,\r\n\t\t\t\tsuccess: c,\r\n\t\t\t\terror: e\r\n\t\t\t})\r\n\t\t\t\t.always(r_aftr);\r\n\t\t},\r\n\t\t/**\r\n\t\t * Update (PUT ~/{id})\r\n\t\t */\r\n\t\tupdate: function (d, a, c) {\r\n\t\t\td['_method'] = 'PUT';\r\n\t\t\t$.ajax({\r\n\t\t\t\tmethod: 'POST',\r\n\t\t\t\turl: a.url + '/' + d[defaults['idField']],\r\n\t\t\t\tdata: d,\r\n\t\t\t\tsuccess: c,\r\n\t\t\t\terror: e\r\n\t\t\t})\r\n\t\t\t\t.always(r_aftr);\r\n\t\t},\r\n\t\t/**\r\n\t\t * Delete (DELETE ~/{id})\r\n\t\t */\r\n\t\tdestroy: function (d, a, c) {\r\n\t\t\td['_method'] = 'DELETE';\r\n\t\t\t$.ajax({\r\n\t\t\t\tmethod: 'POST',\r\n\t\t\t\turl: a.url + '/' + d[defaults['idField']],\r\n\t\t\t\tdata: d,\r\n\t\t\t\tsuccess: c,\r\n\t\t\t\terror: e\r\n\t\t\t})\r\n\t\t\t\t.always(r_aftr);\r\n\t\t}\r\n\t}\r\n\r\n\treturn function () {\r\n\t\tvar c = arguments[0];\r\n\t\tif (c == 'default') {\r\n\t\t\t$.extend(defaults, arguments[1]);\r\n\t\t\treturn;\r\n\t\t}\r\n\t\tif (typeof (rest[c]) != 'function')\r\n\t\t\tthrow new Error('Invalid REST command \"' + c + '\".');\r\n\r\n\t\tif (arguments.length > 1 && typeof (arguments[1]) != 'object')\r\n\t\t\tthrow new Error('Invalid argument. Object expected');\r\n\r\n\t\tvar a = false,\r\n\t\t\tcb = false;\r\n\t\tfor (var i = 1; i < 3; i++)\r\n\t\t\tif (arguments[i]) {\r\n\t\t\t\tif (typeof (arguments[i]) == 'function')\r\n\t\t\t\t\tcb = arguments[i]\r\n\t\t\t\telse\r\n\t\t\t\t\ta = p(arguments[i]);\r\n\t\t\t}\r\n\t\tif (!a) a = defaults;\r\n\t\tif (a.url.lastIndexOf('/') == (a.url.length - 1))\r\n\t\t\ta.url = a.url.substring(0, a.url.length - 1);\r\n\t\tif (a.csrf_token)\r\n\t\t\targuments[1] = $.extend({ '_token': a.csrf_token }, arguments[1])\r\n\t\trest[c](arguments[1], a, cb);\r\n\t};\r\n})(jQuery);"]}