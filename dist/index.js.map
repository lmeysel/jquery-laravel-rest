{"version":3,"sources":["../src/index.js"],"names":[],"mappings":"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","file":"index.js","sourcesContent":["import jQuery from 'jquery';\r\n\r\n/**\r\n * Simple client-side API for fast RESTful implementation for lavarel 5.4 backend.\r\n * Call:\r\n *   - $.rest('<index|create|show|edit|store|update|destroy>, [Object], <URL>)\r\n *   - $.rest('default', [Object])\r\n * \r\n * @copyright 2017 Ludwig Meysel\r\n * @license MIT\r\n */\r\nconst rest = (function ($) {\r\n\tvar fixed = {\r\n\t};\r\n\tvar defaults = {\r\n\t\turl: '/',\r\n\t\tidField: 'id',\r\n\t\tcsrf_token: false,\r\n\t\tbeforeRequest: false,\r\n\t\tafterRequest: false,\r\n\t};\r\n\r\n\tfunction r_bfr() {\r\n\t\tif (typeof (defaults.beforeRequest) == 'function')\r\n\t\t\tdefaults.beforeRequest();\r\n\t}\r\n\r\n\tfunction r_aftr(obj, def, message) {\r\n\t\tif (typeof (defaults.afterRequest) == 'function')\r\n\t\t\tdefaults.afterRequest();\r\n\t}\r\n\r\n\tfunction p(args) {\r\n\t\tif (!args)\r\n\t\t\treturn defaults;\r\n\t\treturn $.extend({}, defaults, args, fixed);\r\n\t}\r\n\r\n\tfunction e(sender) {\r\n\t\tvar cont = $('<div>').appendTo($('body'))\r\n\t\t\t.css({ 'width': '100%', 'height': '100%', 'position': 'fixed', 'top': 0, 'left': 0, 'z-index': 99999, 'background-color': '#ffe6e6' });\r\n\t\tvar text = $('<a>').appendTo(cont)\r\n\t\t\t.css({ 'color': 'red', 'font-size': '2em', 'cursor': 'pointer', position: 'absolute', 'right': '10px', 'top': '10px' })\r\n\t\t\t.html('<i class=\"fa fa-times\"></i>&nbsp;<strong>Close</strong>')\r\n\t\t\t.click(function () { cont.remove(); });\r\n\t\tvar iframe = $('<iframe>').appendTo(cont)\r\n\t\t\t.css({\r\n\t\t\t\t'position': 'absolute',\r\n\t\t\t\t'top': text.outerHeight() + 20 + 'px',\r\n\t\t\t\twidth: '100%',\r\n\t\t\t\t'border': '1px solid #red',\r\n\t\t\t\theight: document.documentElement.clientHeight - text.outerHeight() - 20 + 'px'\r\n\t\t\t});\r\n\t\tvar doc = iframe[0].contentDocument;\r\n\t\tdoc.open();\r\n\t\tdoc.writeln(sender.responseText);\r\n\t\tdoc.close();\r\n\t}\r\n\tvar rest = {\r\n\t\t/**\r\n\t\t * Create: (GET ~/create, where ~ is replaced with url-parameter.)\r\n\t\t * @param [d] The data\r\n\t\t * @param [a] additional arguments\r\n\t\t * @param [c] success-callback\r\n\t\t */\r\n\t\tcreate: function (d, a, c) {\r\n\t\t\tr_bfr();\r\n\t\t\t$.ajax({\r\n\t\t\t\tmethod: 'GET',\r\n\t\t\t\turl: a.url + '/create',\r\n\t\t\t\tdata: d,\r\n\t\t\t\tsuccess: c,\r\n\t\t\t\terror: e\r\n\t\t\t})\r\n\t\t\t\t.always(r_aftr);\r\n\t\t},\r\n\t\t/**\r\n\t\t * Index: (GET ~/)\r\n\t\t */\r\n\t\tindex: function (d, a, c) {\r\n\t\t\t$.ajax({\r\n\t\t\t\tmethod: 'GET',\r\n\t\t\t\turl: a.url,\r\n\t\t\t\tdata: d,\r\n\t\t\t\tsuccess: c,\r\n\t\t\t\terror: e\r\n\t\t\t})\r\n\t\t\t\t.always(r_aftr);\r\n\t\t},\r\n\t\t/**\r\n\t\t * Store (POST ~/)\r\n\t\t */\r\n\t\tstore: function (d, a, c) {\r\n\t\t\td['_method'] = 'POST';\r\n\t\t\t$.ajax({\r\n\t\t\t\tmethod: 'POST',\r\n\t\t\t\turl: a.url,\r\n\t\t\t\tdata: d,\r\n\t\t\t\tsuccess: c,\r\n\t\t\t\terror: e\r\n\t\t\t})\r\n\t\t\t\t.always(r_aftr);\r\n\t\t},\r\n\t\t/**\r\n\t\t * Show (GET ~/{id}, where {id} will be replaced with the value specified in <i>d</i>'s <i>idField</i>)\r\n\t\t */\r\n\t\tshow: function (d, a, c) {\r\n\t\t\t$.ajax({\r\n\t\t\t\tmethod: 'GET',\r\n\t\t\t\turl: a.url + '/' + d[defaults['idField']],\r\n\t\t\t\tdata: d,\r\n\t\t\t\tsuccess: c,\r\n\t\t\t\terror: e\r\n\t\t\t})\r\n\t\t\t\t.always(r_aftr);\r\n\t\t},\r\n\t\t/**\r\n\t\t * Edit (GET ~/{id}/edit)\r\n\t\t */\r\n\t\tedit: function (d, a, c) {\r\n\t\t\t$.ajax({\r\n\t\t\t\tmethod: 'GET',\r\n\t\t\t\turl: a.url + '/' + d[defaults['idField']] + '/edit',\r\n\t\t\t\tdata: d,\r\n\t\t\t\tsuccess: c,\r\n\t\t\t\terror: e\r\n\t\t\t})\r\n\t\t\t\t.always(r_aftr);\r\n\t\t},\r\n\t\t/**\r\n\t\t * Update (PUT ~/{id})\r\n\t\t */\r\n\t\tupdate: function (d, a, c) {\r\n\t\t\td['_method'] = 'PUT';\r\n\t\t\t$.ajax({\r\n\t\t\t\tmethod: 'POST',\r\n\t\t\t\turl: a.url + '/' + d[defaults['idField']],\r\n\t\t\t\tdata: d,\r\n\t\t\t\tsuccess: c,\r\n\t\t\t\terror: e\r\n\t\t\t})\r\n\t\t\t\t.always(r_aftr);\r\n\t\t},\r\n\t\t/**\r\n\t\t * Delete (DELETE ~/{id})\r\n\t\t */\r\n\t\tdestroy: function (d, a, c) {\r\n\t\t\td['_method'] = 'DELETE';\r\n\t\t\t$.ajax({\r\n\t\t\t\tmethod: 'POST',\r\n\t\t\t\turl: a.url + '/' + d[defaults['idField']],\r\n\t\t\t\tdata: d,\r\n\t\t\t\tsuccess: c,\r\n\t\t\t\terror: e\r\n\t\t\t})\r\n\t\t\t\t.always(r_aftr);\r\n\t\t}\r\n\t}\r\n\r\n\treturn function () {\r\n\t\tvar c = arguments[0];\r\n\t\tif (c == 'default') {\r\n\t\t\t$.extend(defaults, arguments[1]);\r\n\t\t\treturn;\r\n\t\t}\r\n\t\tif (typeof (rest[c]) != 'function')\r\n\t\t\tthrow new Error('Invalid REST command \"' + c + '\".');\r\n\r\n\t\tif (arguments.length > 1 && typeof (arguments[1]) != 'object')\r\n\t\t\tthrow new Error('Invalid argument. Object expected');\r\n\r\n\t\tvar a = false,\r\n\t\t\tcb = false;\r\n\t\tfor (var i = 1; i < 3; i++)\r\n\t\t\tif (arguments[i]) {\r\n\t\t\t\tif (typeof (arguments[i]) == 'function')\r\n\t\t\t\t\tcb = arguments[i]\r\n\t\t\t\telse\r\n\t\t\t\t\ta = p(arguments[i]);\r\n\t\t\t}\r\n\t\tif (!a) a = defaults;\r\n\t\tif (a.url.lastIndexOf('/') == (a.url.length - 1))\r\n\t\t\ta.url = a.url.substring(0, a.url.length - 1);\r\n\t\tif (a.csrf_token)\r\n\t\t\targuments[1] = $.extend({ '_token': a.csrf_token }, arguments[1])\r\n\t\trest[c](arguments[1], a, cb);\r\n\t};\r\n})(jQuery);\r\n\r\njQuery.rest = rest;\r\nexport default rest;"]}