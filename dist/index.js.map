{"version":3,"sources":["../src/index.js"],"names":[],"mappings":"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","file":"index.js","sourcesContent":["import $ from 'jquery';\r\n\r\nvar fixed = {\r\n};\r\nvar defaults = {\r\n\turl: '/',\r\n\tidField: 'id',\r\n\tcsrf_token: false,\r\n\tbeforeRequest: false,\r\n\tafterRequest: false,\r\n};\r\n\r\nfunction r_bfr() {\r\n\tif (typeof (defaults.beforeRequest) == 'function')\r\n\t\tdefaults.beforeRequest();\r\n}\r\n\r\nfunction r_aftr(obj, def, message) {\r\n\tif (typeof (defaults.afterRequest) == 'function')\r\n\t\tdefaults.afterRequest();\r\n}\r\n\r\nfunction p(args) {\r\n\tif (!args)\r\n\t\treturn defaults;\r\n\treturn $.extend({}, defaults, args, fixed);\r\n}\r\n\r\nfunction e(sender) {\r\n\tvar cont = $('<div>').appendTo($('body'))\r\n\t\t.css({ 'width': '100%', 'height': '100%', 'position': 'fixed', 'top': 0, 'left': 0, 'z-index': 99999, 'background-color': '#ffe6e6' });\r\n\tvar text = $('<a>').appendTo(cont)\r\n\t\t.css({ 'color': 'red', 'font-size': '2em', 'cursor': 'pointer', position: 'absolute', 'right': '10px', 'top': '10px' })\r\n\t\t.html('<i class=\"fa fa-times\"></i>&nbsp;<strong>Close</strong>')\r\n\t\t.click(function () { cont.remove(); });\r\n\tvar iframe = $('<iframe>').appendTo(cont)\r\n\t\t.css({\r\n\t\t\t'position': 'absolute',\r\n\t\t\t'top': text.outerHeight() + 20 + 'px',\r\n\t\t\twidth: '100%',\r\n\t\t\t'border': '1px solid #red',\r\n\t\t\theight: document.documentElement.clientHeight - text.outerHeight() - 20 + 'px'\r\n\t\t});\r\n\tvar doc = iframe[0].contentDocument;\r\n\tdoc.open();\r\n\tdoc.writeln(sender.responseText);\r\n\tdoc.close();\r\n}\r\nvar rest = {\r\n\t/**\r\n\t * Create: (GET ~/create, where ~ is replaced with url-parameter.)\r\n\t * @param [d] The data\r\n\t * @param [a] additional arguments\r\n\t * @param [c] success-callback\r\n\t */\r\n\tcreate: function (d, a, c) {\r\n\t\tr_bfr();\r\n\t\t$.ajax({\r\n\t\t\tmethod: 'GET',\r\n\t\t\turl: a.url + '/create',\r\n\t\t\tdata: d,\r\n\t\t\tsuccess: c,\r\n\t\t\terror: e\r\n\t\t})\r\n\t\t\t.always(r_aftr);\r\n\t},\r\n\t/**\r\n\t * Index: (GET ~/)\r\n\t */\r\n\tindex: function (d, a, c) {\r\n\t\t$.ajax({\r\n\t\t\tmethod: 'GET',\r\n\t\t\turl: a.url,\r\n\t\t\tdata: d,\r\n\t\t\tsuccess: c,\r\n\t\t\terror: e\r\n\t\t})\r\n\t\t\t.always(r_aftr);\r\n\t},\r\n\t/**\r\n\t * Store (POST ~/)\r\n\t */\r\n\tstore: function (d, a, c) {\r\n\t\td['_method'] = 'POST';\r\n\t\t$.ajax({\r\n\t\t\tmethod: 'POST',\r\n\t\t\turl: a.url,\r\n\t\t\tdata: d,\r\n\t\t\tsuccess: c,\r\n\t\t\terror: e\r\n\t\t})\r\n\t\t\t.always(r_aftr);\r\n\t},\r\n\t/**\r\n\t * Show (GET ~/{id}, where {id} will be replaced with the value specified in <i>d</i>'s <i>idField</i>)\r\n\t */\r\n\tshow: function (d, a, c) {\r\n\t\t$.ajax({\r\n\t\t\tmethod: 'GET',\r\n\t\t\turl: a.url + '/' + d[defaults['idField']],\r\n\t\t\tdata: d,\r\n\t\t\tsuccess: c,\r\n\t\t\terror: e\r\n\t\t})\r\n\t\t\t.always(r_aftr);\r\n\t},\r\n\t/**\r\n\t * Edit (GET ~/{id}/edit)\r\n\t */\r\n\tedit: function (d, a, c) {\r\n\t\t$.ajax({\r\n\t\t\tmethod: 'GET',\r\n\t\t\turl: a.url + '/' + d[defaults['idField']] + '/edit',\r\n\t\t\tdata: d,\r\n\t\t\tsuccess: c,\r\n\t\t\terror: e\r\n\t\t})\r\n\t\t\t.always(r_aftr);\r\n\t},\r\n\t/**\r\n\t * Update (PUT ~/{id})\r\n\t */\r\n\tupdate: function (d, a, c) {\r\n\t\td['_method'] = 'PUT';\r\n\t\t$.ajax({\r\n\t\t\tmethod: 'POST',\r\n\t\t\turl: a.url + '/' + d[defaults['idField']],\r\n\t\t\tdata: d,\r\n\t\t\tsuccess: c,\r\n\t\t\terror: e\r\n\t\t})\r\n\t\t\t.always(r_aftr);\r\n\t},\r\n\t/**\r\n\t * Delete (DELETE ~/{id})\r\n\t */\r\n\tdestroy: function (d, a, c) {\r\n\t\td['_method'] = 'DELETE';\r\n\t\t$.ajax({\r\n\t\t\tmethod: 'POST',\r\n\t\t\turl: a.url + '/' + d[defaults['idField']],\r\n\t\t\tdata: d,\r\n\t\t\tsuccess: c,\r\n\t\t\terror: e\r\n\t\t})\r\n\t\t\t.always(r_aftr);\r\n\t}\r\n}\r\n\r\n\r\n/**\r\n * Simple client-side API for fast RESTful implementation for lavarel 5.4 backend.\r\n * Call:\r\n *   - $.rest('<index|create|show|edit|store|update|destroy>, [Object], <URL>)\r\n *   - $.rest('default', [Object])\r\n * \r\n * @copyright 2017 Ludwig Meysel\r\n * @license MIT\r\n */\r\nfunction execRest() {\r\n\tvar c = arguments[0];\r\n\tif (c == 'default') {\r\n\t\t$.extend(defaults, arguments[1]);\r\n\t\treturn;\r\n\t}\r\n\tif (typeof (rest[c]) != 'function')\r\n\t\tthrow new Error('Invalid REST command \"' + c + '\".');\r\n\r\n\tif (arguments.length > 1 && typeof (arguments[1]) != 'object')\r\n\t\tthrow new Error('Invalid argument. Object expected');\r\n\r\n\tvar a = false,\r\n\t\tcb = false;\r\n\tfor (var i = 1; i < 3; i++)\r\n\t\tif (arguments[i]) {\r\n\t\t\tif (typeof (arguments[i]) == 'function')\r\n\t\t\t\tcb = arguments[i]\r\n\t\t\telse\r\n\t\t\t\ta = p(arguments[i]);\r\n\t\t}\r\n\tif (!a) a = defaults;\r\n\tif (a.url.lastIndexOf('/') == (a.url.length - 1))\r\n\t\ta.url = a.url.substring(0, a.url.length - 1);\r\n\tif (a.csrf_token)\r\n\t\targuments[1] = $.extend({ '_token': a.csrf_token }, arguments[1])\r\n\trest[c](arguments[1], a, cb);\r\n};\r\n\r\n$.rest = execRest;\r\nexport default execRest;\r\n"]}